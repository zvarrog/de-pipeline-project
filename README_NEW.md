# DE Pipeline Project

üöÄ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π data engineering –ø—Ä–æ–µ–∫—Ç** —Å Airflow, Spark, Docker –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ MLOps —Å—Ç–µ–∫–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í GitHub Codespaces (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ù–∞–∂–º–∏—Ç–µ –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É **Code** ‚Üí **Codespaces** ‚Üí **Create codespace**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ (2-3 –º–∏–Ω—É—Ç—ã)
3. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –°–±–æ—Ä–∫–∞ Spark-–æ–±—Ä–∞–∑–∞
docker build -t kindle-reviews-processor:latest .

# –ó–∞–ø—É—Å–∫ Airflow —Å—Ç–µ–∫–∞
docker compose up -d

# –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (30-60 —Å–µ–∫)
docker compose logs -f airflow-init
```

4. –û—Ç–∫—Ä–æ–π—Ç–µ Airflow UI: http://localhost:8080 (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å: airflow/airflow)
5. –í–∫–ª—é—á–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ DAG `end_to_end_kindle_pipeline`

**üéØ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:**
- –ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç Kindle Reviews —Å Kaggle (~5.2M –∑–∞–ø–∏—Å–µ–π, 2.9GB)
- –û–±—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é PySpark
- –°–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Parquet –≤ –ø–∞–ø–∫—É `output/`

## üìä –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### üîÑ **Auto** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
–£–º–Ω—ã–π —Ä–µ–∂–∏–º, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ò—â–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª –≤ `data/original/kindle_reviews.csv`
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç —Å Kaggle
3. –ï—Å–ª–∏ Kaggle –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ–º–ø–ª (1K –∑–∞–ø–∏—Å–µ–π)

### üî∏ **Sample** (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–º–ø–ª
airflow dags trigger end_to_end_kindle_pipeline --conf '{"data_mode": "sample"}'
```

## üìÇ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kaggle API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å Kaggle –Ω—É–∂–µ–Ω API —Ç–æ–∫–µ–Ω:

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://kaggle.com
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Profile ‚Üí Account ‚Üí API ‚Üí Create New Token
3. –°–∫–∞—á–∞–µ—Ç—Å—è —Ñ–∞–π–ª `kaggle.json`
4. –ü–æ–º–µ—Å—Ç–∏—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export KAGGLE_USERNAME="–≤–∞—à_username"
export KAGGLE_KEY="–≤–∞—à_api_key"
```

**üí° –ï—Å–ª–∏ Kaggle API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –ø—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ–º–ø–ª.

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –†–µ–∂–∏–º | –ó–∞–ø–∏—Å–µ–π | –†–∞–∑–º–µ—Ä | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ | RAM |
|-------|---------|--------|-----------------|-----|
| Sample | 1,000 | 701KB | ~30 —Å–µ–∫ | 2GB |
| Auto (Kaggle) | 5.2M | 2.9GB | ~15-30 –º–∏–Ω | 8GB+ |

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –ø–∞–ø–∫–µ `output/` –ø–æ—è–≤–∏—Ç—Å—è:
- `reviews_processed.parquet/` - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Parquet
- –ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏: `helpful_ratio`, `review_timestamp`, `days_since_review`, `*_clean`, `*_len`
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ `asin` –∏ `reviewerID`

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (Windows/Mac/Linux)

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Docker Desktop

```bash
git clone https://github.com/zvarrog/de-pipeline-project.git
cd de-pipeline-project

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker build -t kindle-reviews-processor:latest .
docker compose up -d

# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ dags/                       # Airflow DAGs
‚îÇ   ‚îî‚îÄ‚îÄ process_kindle_reviews_dag.py
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ original/              # –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ sample/                # –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ–º–ø–ª (1K –∑–∞–ø–∏—Å–µ–π)
‚îú‚îÄ‚îÄ output/                    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ (Parquet)
‚îú‚îÄ‚îÄ scripts/                   # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ process_data.py            # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (PySpark)
‚îú‚îÄ‚îÄ docker-compose.yaml        # Airflow —Å—Ç–µ–∫
‚îú‚îÄ‚îÄ Dockerfile                 # –û–±—Ä–∞–∑ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üìà –ß—Ç–æ –¥–µ–ª–∞–µ—Ç pipeline

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–ª–∏ —Ä—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
2. **–û—á–∏—Å—Ç–∫–∞**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞, —É–¥–∞–ª–µ–Ω–∏–µ HTML, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
3. **–û–±–æ–≥–∞—â–µ–Ω–∏–µ**: –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ helpful_ratio, –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
4. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –≠–∫—Å–ø–æ—Ä—Ç –≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Parquet

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Orchestration**: Apache Airflow
- **Processing**: Apache Spark (PySpark)
- **Containerization**: Docker & Docker Compose
- **Data Format**: Parquet (—Å–∂–∞—Ç–∏–µ + —Å—Ö–µ–º–∞)
- **Infrastructure**: GitHub Codespaces ready

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
```python
# –û—á–∏—Å—Ç–∫–∞ HTML –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
df = df.withColumn(
    "reviewText_clean",
    regexp_replace(lower(col("reviewText")), r"<[^>]+>|[^\w\s]", " ")
)
```

### –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
```python
# –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
asin_agg = df.groupBy("asin").agg(
    avg("overall").alias("asin_overall_avg"),
    count("*").alias("asin_total_votes_count")
)
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ MIT –ª–∏—Ü–µ–Ω–∑–∏–µ–π. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

---

‚≠ê **–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤—ë–∑–¥–æ—á–∫—É!**
